# 🎆 赛博烟花启动页 - 增强方案文档 v2.0

> **更新内容**：节假日系统 + 烟花升空爆炸系统 + 文字烟花 + 东方风格UI  
> **目标目录**：`Y:\烟火漫游\Ember_glow_System\Fronted`

---

## 📋 新增需求详解

### 1️⃣ 节假日特殊烟花系统

#### 设计原理
```
每次页面加载 → 检测当前日期
  ↓
如果是节假日 → 放特殊烟花 + 节日祝福文本
  ↓
如果不是 → 放普通烟花
```

#### 支持的节假日列表与祝福词

| 节日 | 日期 | 烟花特效 | 祝福词（举例） |
|------|------|--------|-------------|
| 元旦 | 1-1 | 黄金绽放 | "辞旧迎新，岁月静好" |
| 春节 | 2-10 ~ 2-17 | 红色链式爆炸 | "恭喜发财，新年快乐" / "诸事皆宜，岁岁平安" |
| 清明 | ❌ **不加**（禁忌） | - | - |
| 端午 | 5-28 ~ 6-12 | 龙纹旋转 | "粽叶飘香，艾草芬芳" |
| 中秋 | 9-15 ~ 9-25 | 银色环形 | "但愿人长久，千里共婵娟" |
| 重阳 | 10-11 ~ 10-25 | 红叶飘零 | "遍插茱萸少一人，陶然共醉菊花酒" |
| 圣诞 | 12-24 ~ 12-26 | 冰蓝雪花 | "愿你如雪花般纯净，如烛火般温暖" |

#### 核心代码思路

```typescript
// 节日检测
function detectHoliday(date: Date): {
  name: string;
  wishes: string[];
  effect: 'gold' | 'red' | 'silver' | 'blue' | 'autumn';
} | null {
  const month = date.getMonth() + 1;
  const day = date.getDate();
  
  // 检查是否在节假日范围内
  if (month === 2 && day >= 10 && day <= 17) {
    return {
      name: '春节',
      wishes: ['恭喜发财，新年快乐', '诸事皆宜，岁岁平安', '新年新气象，旧年旧忆留'],
      effect: 'red'
    };
  }
  // ... 其他节假日
  return null;
}
```

---

### 2️⃣ 烟花升空爆炸系统（新架构）

#### 三阶段流程设计

**之前的设计**："直接爆炸"  
**新的设计**："升空 → 爆炸 → 显示"

```
阶段 1：升空（粒子从底部上升）
  ├─ 时长：0.8-1.2s
  ├─ 路径：贝塞尔曲线，加速后减速
  └─ 视觉：一条竖直的光束上升
  
阶段 2：爆炸（中心点炸开）
  ├─ 时长：0.3-0.5s
  ├─ 动画：粒子从中心向四周加速发射
  └─ 视觉：烟花绽放
  
阶段 3：显示（效果展现）
  ├─ 时长：2-3s（特殊烟花持续时间不同）
  ├─ 内容：漂落粒子 / 旋转环 / 文字显示
  └─ 视觉：主体效果（不同烟花类型差异最大）
```

#### 6 种烟花的完整设计

| 烟花类型 | 升空 | 爆炸 | 显示阶段 |
|---------|------|------|---------|
| **绽放型** | 单束上升 | 中心炸开 | 粒子缓慢漂落，逐渐淡出 |
| **环形扩展** | 单束上升 | 产生同心圆 | 圆形逐圈扩大，带彩色轨迹 |
| **喷泉型** | 多束平行上升 | 扇形爆开 | 形成水柱状下坠效果 |
| **链式爆炸** | 逐级上升 | 多点同时炸 | 多个中心各自衍射粒子 |
| **旋转花火** | 单束旋转上升 | 螺旋爆开 | 粒子沿螺旋向外飞散 |
| **文字烟花** | 单束上升 | 爆炸后显字 | 爆炸粒子消散后，字体渐入 |

---

### 3️⃣ 文字烟花系统

#### 设计目标
- 烟花序列中随机触发一种文字烟花
- 爆炸后显示"随机选中的文字"
- 开发者可自由配置文字列表

#### 实现思路

```typescript
// 可配置的文字库
const FIREWORK_TEXTS = [
  '烟火漫游',
  '城市烟火',
  '漫步人间',
  '烟火气息',
  '人间烟火',
  '诗意生活'
];

// 烟花序列生成
function generateFireworkSequence(seed: number) {
  const totalFireworks = 8 + (seed % 5);  // 8-12个烟花
  const textFireworkIndex = Math.floor(Math.random() * totalFireworks);
  
  return {
    totalFireworks,
    textFireworkIndex,  // 第几个烟花是文字烟花
    displayText: FIREWORK_TEXTS[Math.floor(Math.random() * FIREWORK_TEXTS.length)]
  };
}
```

---

### 4️⃣ 东方夜雀食堂风格 UI 设计

#### 色彩提取

从截图分析：
- **主色调**：暖橙色 (#FF6B35, #FF8C42)
- **次色调**：深红 (#8B2E1F, #A1411F)
- **辅色**：奶油黄 (#FDB927, #F9D56E)
- **文本**：深棕 (#2C1810)
- **边框**：黑色或深红

#### 标题设计（烟火漫游 + Ember Glow）

**风格特点**：
- 立体感：多层描边（黑 + 火焰色 + 光晕）
- 字体：楷体或仿宋（中文），带装饰性
- 发光：橙色/黄色光晕（模拟烟火光）
- 阴影：深红色底影，产生3D凸起感

```css
/* 中文标题：烟火漫游 */
.title-zh {
  font-family: '方正楷体', serif;
  font-size: 4rem;
  font-weight: bold;
  
  /* 多层描边效果 */
  -webkit-text-stroke: 3px #2C1810;  /* 黑色主边框 */
  color: #FDB927;  /* 金黄色文字 */
  
  /* 文字阴影堆叠（制造3D效果） */
  text-shadow:
    2px 2px 0 #8B2E1F,      /* 深红色位移阴影 */
    4px 4px 0 #2C1810,      /* 黑色深阴影 */
    0 0 30px #FF8C42,       /* 橙色外光晕 */
    0 0 60px #FDB927;       /* 黄色外光晕 */
  
  filter: drop-shadow(0 0 15px rgba(255, 107, 53, 0.8));
}

/* 英文标题：Ember Glow */
.title-en {
  font-family: 'Georgia', serif;
  font-size: 2.5rem;
  letter-spacing: 0.15em;
  
  -webkit-text-stroke: 2px #2C1810;
  color: #FF8C42;  /* 橙色 */
  
  text-shadow:
    2px 2px 0 #8B2E1F,
    4px 4px 0 #2C1810,
    0 0 20px #FF6B35,
    0 0 40px #FDB927;
  
  opacity: 0.95;
}
```

#### 按钮设计（进入系统）

**风格特点**：
- 矩形，带黑色边框
- 背景：暖色渐变（奶油黄 → 橙色）
- 文字：黑色或深棕，仿古字体
- 悬停：轻微放大 + 光晕增强

```css
.enter-button {
  background: linear-gradient(135deg, #FDB927 0%, #FF8C42 100%);
  border: 3px solid #2C1810;
  border-radius: 8px;  /* 轻微圆角 */
  
  color: #2C1810;
  font-family: '方正楷体', serif;
  font-size: 1.5rem;
  font-weight: bold;
  
  padding: 12px 40px;
  cursor: pointer;
  
  /* 按钮光晕 */
  box-shadow:
    0 0 15px rgba(255, 107, 53, 0.5),
    inset 0 2px 0 rgba(255, 255, 255, 0.3);
  
  transition: all 0.3s ease;
}

.enter-button:hover {
  transform: scale(1.08);
  box-shadow:
    0 0 25px rgba(255, 107, 53, 0.8),
    0 8px 15px rgba(0, 0, 0, 0.3),
    inset 0 2px 0 rgba(255, 255, 255, 0.4);
}

.enter-button:active {
  transform: scale(0.95);
  box-shadow:
    0 0 15px rgba(255, 107, 53, 0.5),
    inset 0 2px 5px rgba(0, 0, 0, 0.2);
}
```

---

## 📁 项目结构规划

```
Y:\烟火漫游\Ember_glow_System\Fronted\
├── src/
│   ├── components/
│   │   └── FireworksLanding/
│   │       ├── index.tsx                    (主容器)
│   │       ├── FireworksCanvas.tsx          (Canvas 烟花渲染)
│   │       ├── TitleAnimation.tsx           (标题与按钮)
│   │       ├── styles.module.css            (所有样式)
│   │       └── types.ts                     (TypeScript 类型定义)
│   ├── utils/
│   │   ├── fireworksEngine.ts               (烟花生成与物理计算)
│   │   ├── holidaySystem.ts                 (节假日检测与祝福词库)
│   │   └── textFireworks.ts                 (文字烟花特效)
│   ├── constants/
│   │   └── holidays.ts                      (节假日配置)
│   ├── App.tsx
│   └── index.tsx
├── public/
│   └── fonts/                               (自定义字体)
├── package.json
├── tsconfig.json
├── vite.config.ts
└── README.md                                (集成说明)
```

---

## 🎯 核心数据结构

```typescript
// 烟花类型定义
type FireworkType = 
  | 'bloom'        // 绽放型
  | 'ring'         // 环形扩展
  | 'fountain'     // 喷泉型
  | 'chain'        // 链式爆炸
  | 'spiral'       // 旋转花火
  | 'text';        // 文字烟花

// 烟花对象
interface Firework {
  id: string;
  type: FireworkType;
  
  // 时间和位置
  startTime: number;
  x: number;
  y: number;
  
  // 升空参数
  launchDuration: number;      // 升空时长
  launchHeight: number;         // 升空高度
  
  // 爆炸参数
  explosionTime: number;        // 爆炸时刻
  explosionForce: number;       // 爆炸强度
  
  // 显示参数
  displayDuration: number;      // 显示阶段时长
  colors: string[];             // 颜色序列
  
  // 文字烟花特有
  displayText?: string;         // 要显示的文字
  
  // 节假日烟花特有
  holiday?: {
    name: string;
    wish: string;
    effectType: string;
  };
}

// 粒子对象
interface Particle {
  x: number;
  y: number;
  vx: number;              // x 方向速度
  vy: number;              // y 方向速度
  age: number;             // 生命周期（0-1）
  color: string;
  size: number;
  opacity: number;
}
```

---

## ✨ 动画时间线（完整版）

```
0s          3s          5s          8s          18s         20s
│───────────│───────────│───────────│───────────│───────────│
烟火开始     标题出现     英文出现     按钮出现    烟火淡出     结束
  │         │           │           │           │
  ├─ 烟火1  ├─ 烟火2-4  ├─ 烟火5-7  └─ 烟火8+   
  │  升空   │  升空+爆   │  升空+爆+显
  └─ 0.5s  └─ 2s      └─ 2.5s
```

**关键时间点**：
- 0s：烟花开始，无标题
- 3-8s：标题陆续出现，烟花继续放
- 8-20s：完整烟花序列，标题保持显示
- 20s+：用户可点击进入，或自动跳转

---

## 🚀 开发顺序（推荐）

1. **第一步**：基础项目搭建 + 环境配置（30min）
2. **第二步**：烟花粒子系统 + 物理引擎（90min）
3. **第三步**：升空爆炸流程 + 6种烟花类型（120min）
4. **第四步**：节假日系统 + 祝福词库（45min）
5. **第五步**：文字烟花特效（30min）
6. **第六步**：UI 设计 + 动画集成（60min）
7. **第七步**：测试 + 优化 + 集成文档（45min）

**总耗时**：约 6-7 小时

---

## 📝 集成到队友项目的注意事项

1. **零依赖**：只需原生 Canvas + React + CSS
2. **模块化**：每个文件都是独立的，可直接复制
3. **可配置**：
   - `constants/holidays.ts` - 自定义节假日和祝福词
   - `utils/textFireworks.ts` - 自定义文字内容
   - `components/FireworksLanding/styles.module.css` - 自定义颜色

4. **路由对接**：队友只需在初始路由前插入 `<FireworksLanding />`

---

*方案 v2.0 完成！准备开始编码？* 💪✨

