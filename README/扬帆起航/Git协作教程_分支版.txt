================================================================================
                    Git协作教程（三分支工作流）
                     GitHub Desktop 图形化操作
================================================================================

【分支模型】三分支

  main ──────────────────────────────────────→  稳定版本，可发布
    │
    └── dev ─────────────────────────────────→  开发分支，日常合并
          │
          ├── feature/user-api ──────────────→  你的功能分支
          └── feature/map-view ──────────────→  同学的功能分支

【分支说明】

  main分支：
    - 只存放稳定可运行的代码
    - 不直接在main上开发
    - 每完成一个阶段从dev合并到main

  dev分支：
    - 开发主线，功能完成后合并到这里
    - 每天从这里获取最新代码
    - 前后端代码汇合的地方

  feature分支：
    - 每个功能一个分支
    - 完成后合并到dev
    - 合并后可以删除


================================================================================
【第一部分】初始设置（只做一次）
================================================================================

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤1：安装GitHub Desktop
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 访问 https://desktop.github.com/
2. 点击 "Download for Windows" 下载安装
3. 打开后点击 File → Options → Accounts → Sign in
4. 在浏览器中登录GitHub账号并授权

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤2：创建仓库（你来做）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【在GitHub网站操作】

1. 打开 https://github.com 登录
2. 点击右上角 "+" → "New repository"
3. 填写：
   - Repository name: yanhuomanyou
   - Description: 烟火漫游-城市烟火气探索平台
   - 选择 Private（私有）
   - ✓ 勾选 "Add a README file"
   - ✓ 勾选 "Add .gitignore" → 选择 Python
4. 点击 "Create repository"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤3：创建dev分支（你来做）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【在GitHub网站操作】

1. 在仓库页面，点击左上角 "main" 按钮（分支下拉）
2. 在输入框中输入：dev
3. 点击下方出现的 "Create branch: dev from main"
4. 现在仓库有两个分支了：main 和 dev

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤4：设置dev为默认分支（你来做）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【在GitHub网站操作】

1. 点击仓库的 Settings
2. 左侧点击 "Default branch"
3. 点击切换按钮，选择 "dev"
4. 点击 Update 确认

这样克隆时默认就是dev分支。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤5：邀请同学（你来做）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 仓库页面 → Settings → Collaborators
2. 点击 "Add people"
3. 输入同学的GitHub用户名
4. 同学收到邮件后点击接受

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤6：克隆仓库到本地（两人都做）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【在GitHub Desktop操作】

1. 打开 GitHub Desktop
2. File → Clone repository
3. 选择 yanhuomanyou 仓库
4. Local path 选择本地文件夹，如 D:\Projects\yanhuomanyou
5. 点击 Clone

克隆完成后，左上角显示 "yanhuomanyou"，当前分支是 "dev"。


================================================================================
【第二部分】日常开发流程（每天都用）
================================================================================

┌─────────────────────────────────────────────────────────────────────┐
│                        每天开发流程图                               │
│                                                                     │
│  1.开始工作     2.创建功能分支    3.写代码    4.提交     5.推送     │
│       ↓              ↓              ↓          ↓          ↓        │
│   切到dev       新建feature分支   修改文件   Commit    Push        │
│   Pull拉取                                                         │
│                                                                     │
│  6.功能完成     7.创建PR          8.合并到dev  9.删除功能分支       │
│       ↓              ↓                ↓              ↓             │
│  推送feature   GitHub网页操作    Merge PR      删除branch          │
└─────────────────────────────────────────────────────────────────────┘

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
流程1：开始工作 - 同步最新代码
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【每天开始写代码前必做！】

1. 打开 GitHub Desktop
2. 点击顶部 "Current branch" → 选择 "dev" 切换到dev分支
3. 点击 "Fetch origin"（检查云端更新）
4. 如果有更新，点击 "Pull origin"（下载最新代码）

这样你的本地dev就是最新的了。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【实战练习】流程1：开始工作 - 同步最新代码
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【你的任务】
前提条件：你已经克隆了仓库到本地

1. 打开 GitHub Desktop，选中项目仓库
2. 点击顶部 "Current branch" → 选择 "dev"
3. 点击 "Fetch origin"
4. 点击 "Pull origin"（拉取最新代码）

如果dev分支没有更新，按钮可能不可用，这是正常的。

【同学的任务】
同学先完成他的第一步修改（见下面的实战练习2）
然后你可以再执行一遍上述步骤，看看能否拉取到同学的更新

【验证成功】
- 本地的 git_practice 文件夹存在
- dev分支是最新的
- 可以看到所有的practice文件

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
流程2：创建功能分支
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【每开发一个新功能就创建一个分支】

1. 确保当前在 dev 分支（看顶部显示）
2. 点击 "Current branch" → "New branch"
3. 输入分支名，格式：feature/功能名
   
   命名示例：
   ┌─────────────────────────────────────────┐
   │ 后端功能分支名                          │
   ├─────────────────────────────────────────┤
   │ feature/user-api        用户接口        │
   │ feature/vitality-calc   烟火气计算      │
   │ feature/route-plan      路线规划        │
   │ feature/db-design       数据库设计      │
   ├─────────────────────────────────────────┤
   │ 前端功能分支名                          │
   ├─────────────────────────────────────────┤
   │ feature/map-view        地图展示        │
   │ feature/login-page      登录页面        │
   │ feature/route-ui        路线规划UI      │
   │ feature/footprint-page  足迹页面        │
   └─────────────────────────────────────────┘

4. 点击 "Create branch"
5. 现在你在新分支上了，可以开始写代码

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【实战练习】流程2：创建功能分支
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【你的任务（后端）】
1. 在GitHub Desktop中确保当前在 dev 分支
2. 点击 "Current branch" → "New branch"
3. 输入分支名：feature/user-api
4. 点击 "Create branch"
5. 现在你在 feature/user-api 分支上了

【同学的任务（前端）】
1. 同样的步骤
2. 输入分支名：feature/map-view
3. 现在你们各自在自己的分支上了

【验证成功】
- 顶部显示当前分支名称
- 对应分支为 feature/user-api (你) 或 feature/map-view (同学)
- 现在可以开始编写代码了

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
流程3：写代码 + 提交
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【在你的功能分支上正常开发】

1. 用VS Code等编辑器写代码
2. 保存文件后，GitHub Desktop左侧会显示修改的文件
3. 在左下角填写提交信息：
   
   提交信息格式：
   ┌─────────────────────────────────────────┐
   │ feat: 添加用户注册接口                  │
   │ feat: 完成地图热力图组件                │
   │ fix: 修复登录验证问题                   │
   │ docs: 更新API文档                       │
   │ style: 格式化代码                       │
   └─────────────────────────────────────────┘

4. 点击 "Commit to feature/xxx"

【提交频率】
  - 完成一个小功能就提交一次
  - 不要攒一堆改动再提交
  - 一天至少提交1-2次

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【实战练习】流程3+4：写代码、提交、推送
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【你的任务（后端）】
前提条件：你已经在 feature/user-api 分支上

1. 用VS Code打开项目文件夹
2. 打开文件：git_practice/backend/user_api.py
3. 在文件中添加一行注释（模拟开发）：
   # 功能实现：用户注册接口
4. 保存文件
5. 回到GitHub Desktop，看到左侧显示"Changes"
6. 点击复选框选中 user_api.py 文件
7. 在左下角"Summary"填写：feat: 添加用户注册接口
8. 点击 "Commit to feature/user-api"
9. 点击 "Push origin"（第一次会显示"Publish branch"）

【同学的任务（前端）】
1. 在 feature/map-view 分支上
2. 打开文件：git_practice/frontend/map_view.html
3. 在文件中添加一行注释：
   <!-- 功能实现：地图热力图展示 -->
4. 保存文件
5. GitHub Desktop中提交
6. Summary: feat: 完成地图热力图组件
7. 点击 "Commit to feature/map-view"
8. 点击 "Push origin"

【验证成功】
- GitHub Desktop显示"已推送"
- GitHub网站的仓库中可以看到新分支 feature/user-api 和 feature/map-view
- 两个分支都有你们的提交记录

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
流程4：推送到云端
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

提交后，点击 "Push origin" 把代码推送到GitHub。

第一次推送新分支时，会提示 "Publish branch"，点击即可。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
流程5：功能完成 - 创建Pull Request (PR)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【功能开发完成后，要合并到dev分支】

方法一：GitHub Desktop操作
1. 推送完成后，点击 "Create Pull Request"
2. 会自动打开浏览器进入GitHub

方法二：GitHub网站操作
1. 打开GitHub仓库页面
2. 点击 "Pull requests" 标签
3. 点击绿色 "New pull request"
4. base 选择 "dev"，compare 选择你的功能分支
5. 点击 "Create pull request"
6. 填写标题和描述，说明这个PR做了什么
7. 点击 "Create pull request"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
流程6：合并PR
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【在GitHub网站操作】

1. 打开Pull Request页面
2. 检查代码改动是否正确
3. 如果没有冲突，点击绿色 "Merge pull request"
4. 点击 "Confirm merge"
5. 合并成功！

合并后可以点击 "Delete branch" 删除已合并的功能分支（保持整洁）。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
流程7：同步最新dev到本地
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【合并完成后，本地也要更新】

1. GitHub Desktop 中切换到 dev 分支
2. 点击 "Fetch origin"
3. 点击 "Pull origin"

现在本地dev包含了最新合并的代码。


================================================================================
【第三部分】处理冲突
================================================================================

【什么时候会冲突？】
  当你和同学修改了同一个文件的同一行代码。

【冲突场景举例】
  你改了 config.py 第10行：port = 8000
  同学也改了 config.py 第10行：port = 3000
  合并时Git不知道用哪个 → 冲突！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
解决冲突步骤
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 创建PR时GitHub会提示有冲突
2. 点击 "Resolve conflicts"
3. 在网页编辑器中会看到：

   <<<<<<< feature/your-branch
   port = 8000              ← 你的代码
   =======
   port = 3000              ← 别人的代码
   >>>>>>> dev

4. 手动编辑，保留正确的内容：
   port = 8000              ← 删掉标记，保留这个

5. 点击 "Mark as resolved"
6. 点击 "Commit merge"
7. 然后正常合并PR

【避免冲突的技巧】
  ✓ 前后端代码在不同文件夹，基本不会冲突
  ✓ 开始工作前先Pull最新代码
  ✓ 小步提交，频繁合并
  ✓ 和同学沟通，避免同时改同一文件

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【实战练习】第三部分：冲突解决
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【练习目标】
学会识别和解决Git冲突。这是一个有意制造的冲突，帮助你理解发生了什么。

【前提条件】
- 你已经完成了实战练习流程3+4
- 你们各自在自己的分支上有提交
- 现在要开始向dev合并

【第一步：你先创建PR并合并】

你的操作（后端）：
1. 打开GitHub仓库页面
2. 点击 "Pull requests" → "New pull request"
3. base 选择 "dev"，compare 选择 "feature/user-api"
4. 点击 "Create pull request"
5. 标题写：feat: 用户API功能
6. 点击 "Create pull request"
7. 如果没有冲突，点击 "Merge pull request"
8. 完成！你的功能已经合并到dev了

【第二步：同学尝试合并（这里可能产生冲突）】

同学的操作（前端）：
1. 打开GitHub网站
2. 点击 "Pull requests" → "New pull request"
3. base 选择 "dev"，compare 选择 "feature/map-view"
4. 点击 "Create pull request"
5. 标题写：feat: 地图展示功能
6. 点击 "Create pull request"

【第三步：解决冲突（如果有）】

如果出现冲突提示：
1. GitHub会显示 "Can't merge automatically"
2. 点击 "Resolve conflicts"
3. GitHub会打开网页编辑器
4. 你会看到类似这样的标记：

   <<<<<<< feature/map-view
   <!-- 你的代码 -->
   =======
   <!-- dev分支的代码 -->
   >>>>>>> dev

5. 手动编辑，保留正确的代码（通常是都保留）
6. 删除冲突标记 <<<<<<、=======、>>>>>>> 这几行
7. 点击 "Mark as resolved"
8. 点击 "Commit merge"
9. 然后点击 "Merge pull request" 完成合并

【如果没有冲突】
如果同学的PR没有冲突，直接点击 "Merge pull request" 即可。
这表示两个分支改动的文件不重叠。

【验证成功】
- dev分支现在包含了你和同学的两个功能
- GitHub Desktop中，切换到dev分支，Pull一下
- 可以看到两个功能文件都更新了

【进阶练习（可选）】
如果想体验更明显的冲突，可以：
1. 你们都修改 git_practice/backend/config.py 这个文件
2. 你修改 API_PORT = 8000
3. 同学修改 API_PORT = 3000
4. 两个都向dev合并 → 一定会冲突！
5. 按照上述步骤解决冲突


================================================================================
【第四部分】阶段发布 - 合并到main
================================================================================

【什么时候合并到main？】
  - 完成一个开发阶段
  - 代码稳定可运行
  - 准备做演示或发布

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
合并dev到main
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【在GitHub网站操作】

1. 点击 "Pull requests" → "New pull request"
2. base 选择 "main"，compare 选择 "dev"
3. 点击 "Create pull request"
4. 标题写：v0.1 阶段一完成 / v0.2 阶段二完成
5. 确认无误后 "Merge pull request"

合并后main就是最新稳定版了。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【实战练习】第四部分：阶段发布 - 合并到main
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【前提条件】
- 你和同学都已经完成了开发
- 你们的功能都已经合并到dev分支了
- dev分支现在是稳定的、可以发布的版本

【发布流程】

第1步：准备发布
  → 确认dev分支包含了所有要发布的功能
  → 在GitHub Desktop中切换到dev分支
  → Pull最新代码
  → 本地验证没有问题

第2步：创建发布PR
  → 打开GitHub仓库页面
  → 点击 "Pull requests" → "New pull request"
  → base 选择 "main"（这是发布的目标分支）
  → compare 选择 "dev"（这是要发布的源代码）
  → 点击 "Create pull request"

第3步：填写发布说明
  标题示例：v0.1 阶段一完成 - 用户登录和地图功能

  描述示例：
  本次发布内容：
  - 完成用户注册登录功能 (feature/user-api)
  - 实现地图热力图展示 (feature/map-view)

  测试状态：已通过全部功能测试
  部署准备：代码稳定，可以发布

第4步：审查并合并
  → 检查此PR包含的所有改动
  → 确认没有问题
  → 点击 "Merge pull request"
  → 点击 "Confirm merge"

第5步：发布完成
  → main分支现在包含了这个版本
  → dev分支继续用于下一个版本的开发
  → 可以选择删除已合并的分支保持整洁

【验证发布成功】
- GitHub网站上，main分支有一个新的merge commit
- commit信息类似 "Merge pull request #X from xxx/dev"
- main分支现在和dev分支一样新了（对于发布的这些功能）
- dev分支独立继续开发新功能

【三分支的价值体现】
通过这个练习，你可以看到：
✓ feature分支：用于独立开发，互不影响
✓ dev分支：用于集成所有功能，保持开发的进度
✓ main分支：只保存发布版本，确保稳定性

这就是三分支工作流的核心！


================================================================================
【第五部分】完整工作示例
================================================================================

【场景：你要开发"用户登录API"】

第1步：同步dev
  → 切换到dev分支 → Fetch → Pull

第2步：创建功能分支
  → New branch → 命名 "feature/user-login"

第3步：写代码
  → 创建 backend/app/api/users.py
  → 写登录接口代码
  → 保存

第4步：提交
  → Summary: "feat: 添加用户登录接口"
  → Commit to feature/user-login

第5步：继续开发...
  → 添加注册接口
  → 提交: "feat: 添加用户注册接口"

第6步：推送
  → Push origin（第一次是Publish branch）

第7步：创建PR
  → GitHub网站 → Pull requests → New
  → base: dev ← compare: feature/user-login
  → Create pull request
  → 标题: "feat: 用户登录注册接口"

第8步：合并
  → Merge pull request → Confirm

第9步：更新本地dev
  → 切换到dev → Fetch → Pull

第10步：开始下一个功能
  → 创建新分支 feature/xxx → 重复上述流程


================================================================================
【实战练习】第五部分：完整工作流程综合实战
================================================================================

【练习目标】
通过一个完整的实战，体验从需求分析到发布的整个开发流程。

【你的完整任务（后端开发）】

总体目标：完成用户API功能的开发和发布

第1步：准备开发环境
  → 切换到dev分支
  → Fetch → Pull 获取最新代码
  → 本地确保是最新的dev版本

第2步：创建功能分支
  → New branch → feature/user-api
  → 基于dev分支创建

第3步：第一次开发迭代
  → 打开 git_practice/backend/user_api.py
  → 添加代码注释：# 第一版本：基础用户API框架
  → 保存文件

第4步：第一次提交
  → GitHub Desktop中选中 user_api.py
  → Summary: feat: 用户API基础框架
  → Commit to feature/user-api

第5步：第二次开发迭代
  → 继续修改 user_api.py
  → 添加注释：# 添加了注册接口实现
  → 保存

第6步：第二次提交
  → Summary: feat: 添加用户注册接口
  → Commit

第7步：推送到云端
  → Push origin
  → 第一次会提示 Publish branch

第8步：创建Pull Request
  → GitHub网站打开仓库
  → Pull requests → New pull request
  → base: dev
  → compare: feature/user-api
  → Create pull request
  → 标题：feat: 用户API功能完成
  → 描述：完成了用户注册接口的实现，代码已测试

第9步：合并到dev
  → 如果没有冲突，点击 Merge pull request
  → 确认合并

第10步：同步本地dev
  → 切换到dev分支
  → Fetch → Pull
  → 现在本地dev包含你刚才合并的feature/user-api

第11步：等待同学完成（或者你也完成他的任务）
  → 同样完成前端开发流程

第12步：发布版本
  → dev分支现在包含了所有完成的功能
  → Pull requests → New pull request
  → base: main
  → compare: dev
  → Create pull request
  → 标题：v0.1 用户认证功能阶段完成
  → Merge pull request
  → 完成发布！

【同学的完整任务（前端开发）】

总体目标：完成地图展示功能的开发和发布

按照同样的流程：
- 分支名：feature/map-view
- 修改文件：git_practice/frontend/map_view.html
- PR标题：feat: 地图展示功能完成
- 最后一起参与发布到main

【完整流程的关键点】

✓ 每个功能一个分支
✓ 分支内部可以多次提交
✓ 完成后创建PR合并到dev
✓ dev分支汇聚所有功能
✓ 定期从dev合并到main发布

【整个流程的时间线】

Timeline:
  dev分支 (main的开发版本)
    ↓
  你创建 feature/user-api
    ↓
  在feature/user-api上开发、提交、推送
    ↓
  创建PR: feature/user-api → dev
    ↓
  Merge PR (feature/user-api已合并到dev)
    ↓
  同学创建 feature/map-view
    ↓
  在feature/map-view上开发、提交、推送
    ↓
  创建PR: feature/map-view → dev
    ↓
  Merge PR (feature/map-view已合并到dev)
    ↓
  现在dev包含了所有功能
    ↓
  创建PR: dev → main (发布)
    ↓
  Merge PR (发布完成！)
    ↓
  main分支现在有稳定版本v0.1
  dev分支继续开发下一个版本


================================================================================
【第六部分】分支管理规范
================================================================================

【分支命名规范】

  feature/xxx   - 新功能
  fix/xxx       - 修复bug
  docs/xxx      - 文档更新

  示例：
  feature/user-api
  feature/map-heatmap
  fix/login-error
  docs/api-update

【保持整洁】

  ✓ 功能分支合并后删除
  ✓ 不要在main上直接开发
  ✓ 不要在dev上直接开发大功能（小修改可以）
  ✓ 定期清理已合并的分支

【查看所有分支】

  GitHub Desktop: 点击 Current branch，看列表
  GitHub网站: 仓库页面点击分支下拉

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【实战练习】第六部分：分支管理规范
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【检查你的分支结构】

经过上面的完整练习，你应该有以下分支：

main分支：
  - 已发布的v0.1版本

dev分支：
  - 包含所有已合并的功能

feature/user-api 或 feature/map-view：
  - 这些分支已经完成了任务
  - 现在应该删除，保持整洁

【清理已完成的功能分支】

方法一：在GitHub网站上删除
1. 打开仓库页面
2. 点击 "分支" 或 Branches
3. 找到 feature/user-api 或 feature/map-view
4. 点击垃圾桶图标删除
5. 确认删除

方法二：在GitHub Desktop中删除
1. 点击 "Current branch"
2. 找到已完成的功能分支
3. 右键选择 "Delete" 删除

【保持整洁的习惯】

✓ 功能完成、PR合并后立即删除分支
✓ 定期检查本地和云端分支
✓ 清理已删除的远程分支：
  GitHub Desktop → Right-click branch → Delete

【规范的分支命名实践】

在后续开发中，遵循这些规范创建新分支：

新功能：
  feature/vitality-calc     - 新增烟火气计算功能
  feature/route-planning    - 新增路线规划功能

Bug修复：
  fix/login-error           - 修复登录验证问题
  fix/map-crash             - 修复地图崩溃问题

文档更新：
  docs/api-documentation    - 更新API文档
  docs/user-guide           - 编写用户指南

【验证你的分支管理】

完成这个练习后，你应该能：
✓ 知道哪些分支是活跃的
✓ 知道哪些分支已经完成
✓ 及时清理已完成的分支
✓ 遵循统一的命名规范
✓ 保持仓库的整洁和有序


================================================================================
【第七部分】常见问题
================================================================================

Q: 不小心在dev上写了代码怎么办？
A: 如果还没提交：
   1. 选中修改的文件
   2. 右键 → Stash all changes（暂存）
   3. 创建新分支
   4. 右键 → Apply stashed changes（恢复）

Q: 想撤销刚才的提交？
A: History标签 → 右键那次提交 → Revert this commit

Q: Push被拒绝？
A: 说明云端有更新，先Fetch→Pull再Push

Q: 合并时有冲突？
A: 按第三部分步骤解决

Q: 怎么知道现在在哪个分支？
A: 看GitHub Desktop顶部显示的分支名

Q: feature分支开发到一半，需要切换到其他分支？
A: 先提交当前改动（即使未完成），或用Stash暂存


================================================================================
【第八部分】你们的分工对应分支
================================================================================

【后端（你）常用的分支】
  feature/db-design       数据库设计
  feature/user-api        用户接口
  feature/vitality-api    烟火气数据接口
  feature/poi-api         POI接口
  feature/route-api       路线规划接口
  feature/footprint-api   足迹接口
  feature/travelog-api    游记接口

【前端（同学）常用的分支】
  feature/project-init    项目初始化
  feature/layout          布局组件
  feature/map-view        地图展示
  feature/login-page      登录页面
  feature/route-plan      路线规划页
  feature/footprint       足迹打卡
  feature/travelog        游记功能

【共同】
  feature/data-collect    数据采集脚本
  feature/docs            文档更新


================================================================================
【速查表】
================================================================================

┌──────────────────┬────────────────────────────────────────────┐
│ 我要...          │ 操作                                       │
├──────────────────┼────────────────────────────────────────────┤
│ 开始新功能       │ 切dev → Pull → New branch                  │
│ 保存进度         │ Commit                                     │
│ 上传代码         │ Push                                       │
│ 功能完成         │ Push → 创建PR → Merge                      │
│ 获取最新代码     │ 切dev → Fetch → Pull                       │
│ 切换分支         │ Current branch → 选择分支                  │
│ 查看修改历史     │ History标签                                │
│ 撤销修改         │ 右键文件 → Discard changes                 │
│ 发布稳定版       │ 从dev创建PR到main → Merge                  │
└──────────────────┴────────────────────────────────────────────┘


================================================================================
【文档结束】Git协作教程_分支版.txt
================================================================================
